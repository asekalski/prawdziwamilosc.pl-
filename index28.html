<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Full Scrolling GSAP Experience</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <style>
    html, body { margin:0; padding:0; width:100vw; min-height:100vh; overflow:hidden; background:#0b0c1e; }
    body { font-family: 'Montserrat', 'Georgia', serif; }
    #sectionWrap { position:absolute;top:0;left:0;width:100vw;height:100vh;will-change:transform; }
    .section { width:100vw; height:100vh; position:absolute; top:0; left:0; overflow:hidden; display:flex; justify-content:center; align-items:center; }
    .bg-image { position:absolute;top:0;left:0;width:100vw;height:100vh;background-size:cover;background-position:center;z-index:1;will-change:transform;opacity:1;}
    .banner { position:relative;z-index:2;text-align:center;color:#fff;font-size:3rem;font-weight:900;letter-spacing:0.06em;text-shadow:0 6px 28px #1a143abb;background:rgba(16,13,30,0.6);padding:48px 72px;border-radius:28px;box-shadow:0 7px 55px 9px rgba(20,10,40,0.32);will-change:transform,opacity;pointer-events:none; opacity:1;}
    .banner.hide { opacity:0 !important; }
    @media(max-width:760px){.banner{font-size:1.6rem;padding:28px 10vw;}}
  </style>
</head>
<body>
  <div id="sectionWrap">
    <div class="section" style="top:0vh">
      <div class="bg-image" style="background-image:url('pink_sky.webp')"></div>
      <div class="banner">Dream Activation</div>
    </div>
    <div class="section" style="top:100vh">
      <div class="bg-image" style="background-image:url('venus2.webp')"></div>
      <div class="banner">Higher Consciousness</div>
    </div>
    <div class="section" style="top:200vh">
      <div class="bg-image" style="background-image:url('love4.webp')"></div>
      <div class="banner">Aligned Creation</div>
    </div>
    <div class="section" style="top:300vh">
      <div class="bg-image" style="background-image:url('love5.webp')"></div>
      <div class="banner">Empathic Success</div>
    </div>
  </div>
<script>
// Pure GSAP smooth scroll snap implementation
const sections = document.querySelectorAll('.section');
const sectionWrap = document.getElementById('sectionWrap');
const bgs = document.querySelectorAll('.bg-image');
const banners = document.querySelectorAll('.banner');
let current = 0;
let isAnimating = false;
const numSections = sections.length;
function getTargetY(idx){ return -Math.round(idx * window.innerHeight); }
function goToSection(idx){
  isAnimating = true;
  hideAllBannersExcept(idx);
  gsap.to(sectionWrap, {
    y: getTargetY(idx),
    duration: 1.05,
    ease: "power3.out",
    onComplete(){ isAnimating=false; preciseSnap(idx); animateEntry(idx); }
  });
  reverseBgAnim(idx);
  current = idx;
}
function preciseSnap(idx){ gsap.set(sectionWrap, {y:getTargetY(idx)}); }
function hideAllBannersExcept(activeIdx){
  banners.forEach((b, i) => {
    if(i !== activeIdx) {
      gsap.set(b, {opacity:0});
      b.classList.add('hide');
    } else {
      gsap.set(b, {opacity:1});
      b.classList.remove('hide');
    }
  });
}
window.addEventListener('wheel',e=>{
  if(isAnimating) return;
  let dir=e.deltaY>50?1:(e.deltaY<-50?-1:0);
  if(dir===1&&current<numSections-1) { goToSection(current+1); e.preventDefault(); }
  if(dir===-1&&current>0) { goToSection(current-1); e.preventDefault(); }
},{passive:false});
window.addEventListener('keydown',e=>{
  if(isAnimating) return;
  if((e.key==='ArrowDown'||e.key==='PageDown')&&current<numSections-1) { goToSection(current+1); e.preventDefault(); }
  if((e.key==='ArrowUp'||e.key==='PageUp')&&current>0) { goToSection(current-1); e.preventDefault(); }
});
let touchY=null;
window.addEventListener('touchstart',e=>{if(e.touches.length)touchY=e.touches[0].clientY;});
window.addEventListener('touchend',()=>{touchY=null;});
window.addEventListener('touchmove',e=>{
 if(isAnimating||touchY===null)return;
 let dY=e.touches[0].clientY-touchY;
 if(dY<-60&&current<numSections-1){goToSection(current+1);touchY=null;}
 if(dY>60&&current>0){goToSection(current-1);touchY=null;}
},{passive:false});
window.addEventListener('resize',()=>{preciseSnap(current);});
// Entry effect (zoom bg, fade banner)
function animateEntry(idx){
  gsap.to(bgs[idx], {scale:1.05, duration:0, overwrite:true}); // reset zoom
  gsap.to(bgs[idx], {scale:1, duration:1, ease:'power2.out'}); // animate zoom in
  gsap.fromTo(banners[idx], {opacity:0, y:60},{opacity:1, y:0, duration:0.8, ease:'power2.out', overwrite:true});
}
animateEntry(0);
// Mouse parallax & reverse parallax
sections.forEach((section, idx)=>{
  let bg=bgs[idx],banner=banners[idx];
  section.addEventListener('mousemove',e=>{
    let rect=section.getBoundingClientRect();
    let x=(e.clientX-rect.left)/rect.width-0.5;
    let y=(e.clientY-rect.top)/rect.height-0.5;
    gsap.to(bg,{x:x*window.innerWidth*0.02,y:y*window.innerHeight*0.02,duration:0.6,overwrite:true});
    gsap.to(banner,{x:x*window.innerWidth*0.055,y:y*window.innerHeight*0.055,duration:0.35,overwrite:true});
  });
  section.addEventListener('mouseleave',()=>{
    gsap.to(bg,{x:0,y:0,duration:0.75});
    gsap.to(banner,{x:0,y:0,duration:0.5});
  });
});
// Reverse BG scrolling — tło przesuwa się w przeciwną stronę przy scrollu
function reverseBgAnim(idx){
  let revY = current < idx ? -32 : (current > idx ? 32 : 0);
  gsap.to(bgs[idx], {y:revY, duration:0.38, ease:'power3.inOut', onComplete(){
    gsap.to(bgs[idx],{y:0,duration:0.7,ease:'power2.out'});
  }});
}
</script>
</body>
</html>
