<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empathic Success - Thrive as an Empath in Life and Work</title>
    <meta name="description" content="A platform dedicated to empaths seeking authentic success, personal growth, and meaningful connections. Discover your empathic superpowers.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
:root {
  --color-primary: #7F53AC;
  --color-secondary: #647DEE;
  --color-accent: #BC6FF1;
  --color-white: #FFFFFF;
  --color-dark: #1a1a2e;
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family);
  color: var(--color-white);
  background: var(--color-dark);
  overflow-x: hidden;
  line-height: 1.6;
}

/* Navigation */
.nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  padding: 24px 48px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 1000;
  background: rgba(26, 26, 46, 0.8);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.nav.scrolled {
  background: rgba(26, 26, 46, 0.95);
  padding: 16px 48px;
}

.logo {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-white);
  text-decoration: none;
  letter-spacing: -0.5px;
}

.nav-menu {
  display: flex;
  gap: 32px;
  align-items: center;
}

.nav-link {
  color: var(--color-white);
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  transition: opacity 0.3s ease;
  position: relative;
}

.nav-link:hover {
  opacity: 0.7;
}

.nav-link::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--color-accent);
  transition: width 0.3s ease;
}

.nav-link:hover::after {
  width: 100%;
}

.menu-toggle {
  display: none;
  background: none;
  border: none;
  color: var(--color-white);
  font-size: 24px;
  cursor: pointer;
}

/* Hero Section */
.hero {
  position: relative;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 120px 48px 80px;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #1a1a2e 50%, #0f3460 75%, #1a1a2e 100%);
  overflow: hidden;
}

.hero-gradient {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at 50% 50%, rgba(127, 83, 172, 0.3) 0%, rgba(100, 125, 238, 0.2) 35%, transparent 70%);
  pointer-events: none;
}

.orb-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 500px;
  height: 500px;
  pointer-events: none;
}

.orb {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 300px;
  height: 300px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(188, 111, 241, 0.8), rgba(127, 83, 172, 0.6), rgba(100, 125, 238, 0.4));
  filter: blur(40px);
  opacity: 0.7;
  animation: float 6s ease-in-out infinite;
}

.orb-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 350px;
  height: 350px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(188, 111, 241, 0.4), transparent 70%);
  filter: blur(60px);
  animation: pulse 4s ease-in-out infinite alternate;
}

@keyframes float {
  0%, 100% { transform: translate(-50%, -50%) translateY(0px); }
  50% { transform: translate(-50%, -50%) translateY(-20px); }
}

@keyframes pulse {
  0% { opacity: 0.4; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0.7; transform: translate(-50%, -50%) scale(1.1); }
}

.hero-content {
  position: relative;
  z-index: 10;
  text-align: center;
  max-width: 900px;
}

.hero-title {
  font-size: 72px;
  font-weight: 700;
  line-height: 1.1;
  margin-bottom: 24px;
  letter-spacing: -2px;
  opacity: 0;
  transform: translateY(30px);
}

.hero-subtitle {
  font-size: 20px;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 48px;
  opacity: 0;
  transform: translateY(30px);
}

.hero-buttons {
  display: flex;
  gap: 16px;
  justify-content: center;
  opacity: 0;
  transform: translateY(30px);
}

.btn {
  padding: 16px 32px;
  font-size: 16px;
  font-weight: 600;
  border-radius: 50px;
  text-decoration: none;
  transition: all 0.3s ease;
  cursor: pointer;
  border: none;
  font-family: var(--font-family);
}

.btn-primary {
  background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
  color: var(--color-white);
  box-shadow: 0 8px 24px rgba(127, 83, 172, 0.4);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(127, 83, 172, 0.6);
}

.btn-secondary {
  background: rgba(255, 255, 255, 0.1);
  color: var(--color-white);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
}

.btn-secondary:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.3);
}

/* Section Styles */
.section {
  padding: 120px 48px;
  position: relative;
}

.section-header {
  text-align: center;
  max-width: 800px;
  margin: 0 auto 80px;
  opacity: 0;
  transform: translateY(30px);
}

.section-label {
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--color-accent);
  margin-bottom: 16px;
}

.section-title {
  font-size: 48px;
  font-weight: 700;
  line-height: 1.2;
  margin-bottom: 24px;
  letter-spacing: -1px;
}

.section-description {
  font-size: 18px;
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.6;
}

/* Manifesto Section */
.manifesto {
  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
}

/* Categories Section */
.categories {
  background: linear-gradient(180deg, #16213e 0%, #1a1a2e 100%);
}

.categories-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 32px;
  max-width: 1200px;
  margin: 0 auto;
}

.category-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 24px;
  padding: 48px 32px;
  transition: all 0.4s ease;
  opacity: 0;
  transform: translateY(30px);
  cursor: pointer;
}

.category-card:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(188, 111, 241, 0.5);
  transform: translateY(-8px);
  box-shadow: 0 16px 48px rgba(127, 83, 172, 0.3);
}

.category-icon {
  width: 64px;
  height: 64px;
  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 24px;
  font-size: 32px;
}

.category-title {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 16px;
}

.category-description {
  font-size: 16px;
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.6;
}

/* Success Stories Section */
.success-stories {
  background: linear-gradient(180deg, #1a1a2e 0%, #0f3460 100%);
}

.stories-container {
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
}

.stories-slider {
  display: flex;
  gap: 32px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  padding: 20px 0;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}

.stories-slider::-webkit-scrollbar {
  display: none;
}

.story-card {
  flex: 0 0 calc(33.333% - 22px);
  min-width: 300px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 24px;
  padding: 48px;
  scroll-snap-align: start;
  transition: all 0.4s ease;
  opacity: 0;
  transform: translateY(30px);
}

.story-card:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(188, 111, 241, 0.5);
  transform: translateY(-8px);
}

.story-avatar {
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  border-radius: 50%;
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  font-weight: 700;
}

.story-quote {
  font-size: 18px;
  font-style: italic;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 24px;
  line-height: 1.6;
}

.story-name {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-accent);
}

/* Team Section */
.team {
  background: linear-gradient(180deg, #0f3460 0%, #1a1a2e 100%);
}

.team-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 48px;
  max-width: 1000px;
  margin: 0 auto;
}

.team-member {
  text-align: center;
  opacity: 0;
  transform: translateY(30px);
}

.team-avatar {
  width: 150px;
  height: 150px;
  background: linear-gradient(135deg, var(--color-secondary), var(--color-primary));
  border-radius: 50%;
  margin: 0 auto 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  font-weight: 700;
  transition: transform 0.3s ease;
}

.team-member:hover .team-avatar {
  transform: scale(1.05);
}

.team-name {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 8px;
}

.team-role {
  font-size: 16px;
  color: rgba(255, 255, 255, 0.6);
}

/* News Section */
.news {
  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
}

.news-list {
  max-width: 800px;
  margin: 0 auto;
}

.news-item {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 32px;
  margin-bottom: 24px;
  transition: all 0.3s ease;
  opacity: 0;
  transform: translateY(30px);
  cursor: pointer;
}

.news-item:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(188, 111, 241, 0.3);
  transform: translateX(8px);
}

.news-date {
  font-size: 14px;
  color: var(--color-accent);
  margin-bottom: 12px;
  font-weight: 500;
}

.news-title {
  font-size: 20px;
  font-weight: 600;
}

/* Footer */
.footer {
  background: #16213e;
  padding: 80px 48px 40px;
  text-align: center;
}

.footer-content {
  max-width: 1200px;
  margin: 0 auto;
}

.footer-logo {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 24px;
}

.footer-links {
  display: flex;
  gap: 32px;
  justify-content: center;
  margin-bottom: 32px;
  flex-wrap: wrap;
}

.footer-link {
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
  font-size: 14px;
  transition: color 0.3s ease;
}

.footer-link:hover {
  color: var(--color-accent);
}

.footer-copyright {
  color: rgba(255, 255, 255, 0.5);
  font-size: 14px;
  padding-top: 32px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

/* Scroll indicator */
.scroll-indicator {
  position: fixed;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  opacity: 1;
  transition: opacity 0.3s ease;
}

.scroll-indicator.hidden {
  opacity: 0;
  pointer-events: none;
}

.scroll-arrow {
  width: 30px;
  height: 50px;
  border: 2px solid rgba(255, 255, 255, 0.5);
  border-radius: 25px;
  position: relative;
}

.scroll-arrow::after {
  content: '';
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 6px;
  height: 6px;
  background: var(--color-accent);
  border-radius: 50%;
  animation: scroll-down 2s ease-in-out infinite;
}

@keyframes scroll-down {
  0% { top: 10px; opacity: 1; }
  100% { top: 30px; opacity: 0; }
}

/* Responsive */
@media (max-width: 768px) {
  .nav {
    padding: 16px 24px;
  }
  
  .nav-menu {
    display: none;
  }
  
  .menu-toggle {
    display: block;
  }
  
  .hero {
    padding: 100px 24px 60px;
  }
  
  .hero-title {
    font-size: 42px;
  }
  
  .hero-subtitle {
    font-size: 16px;
  }
  
  .hero-buttons {
    flex-direction: column;
  }
  
  .orb-container {
    width: 300px;
    height: 300px;
  }
  
  .orb {
    width: 200px;
    height: 200px;
  }
  
  .section {
    padding: 80px 24px;
  }
  
  .section-title {
    font-size: 32px;
  }
  
  .categories-grid {
    grid-template-columns: 1fr;
  }
  
  .story-card {
    flex: 0 0 calc(100% - 22px);
  }
  
  .team-grid {
    grid-template-columns: 1fr;
  }
  
  .footer {
    padding: 60px 24px 32px;
  }
}

@media (min-width: 769px) and (max-width: 1024px) {
  .story-card {
    flex: 0 0 calc(50% - 16px);
  }
}
    
        /* Sticky Heart - ultra slow initial speed */
        #heart-sticky {
            position: fixed;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #heart-3d-canvas {
            width: 100%;
            height: 100%;
            opacity: 0.4;
            filter: drop-shadow(0 0 90px rgba(188, 111, 241, 0.5));
        }
        #heart-fallback {
            display: none;
            width: 400px;
            height: 400px;
            opacity: 0.45;
            filter: drop-shadow(0 0 100px rgba(188, 111, 241, 0.7));
            will-change: transform;
        }
        #heart-fallback svg {
            width: 100%;
            height: 100%;
        }
</style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <a href="#" class="logo">Empathic Success</a>
        <div class="nav-menu">
            <a href="#manifesto" class="nav-link">Manifesto</a>
            <a href="#superpowers" class="nav-link">Superpowers</a>
            <a href="#stories" class="nav-link">Stories</a>
            <a href="#team" class="nav-link">Team</a>
            <a href="#news" class="nav-link">News</a>
        </div>
        <button class="menu-toggle">‚ò∞</button>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-gradient"></div>
        <div class="orb-container">
            <div class="orb"></div>
            <div class="orb-glow"></div>
        </div>
        <div class="hero-content">
            <h1 class="hero-title">Discover your empathic superpowers.</h1>
            <p class="hero-subtitle">Join a community built on authenticity, emotional intelligence, and conscious growth for empaths.</p>
            <div class="hero-buttons">
                <a href="#" class="btn btn-primary">Sign up for Empathic Newsletter</a>
                <a href="#" class="btn btn-secondary">Learn More</a>
            </div>
        </div>
    </section>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator">
        <div class="scroll-arrow"></div>
    </div>

    <!-- Manifesto Section -->
    <section id="manifesto" class="section manifesto">
        <div class="section-header">
            <div class="section-label">Our Manifesto</div>
            <h2 class="section-title">We believe in empathic success</h2>
            <p class="section-description">We created Empathic Success so every empath can thrive authentically and build a life rooted in emotional awareness, inner strength, and meaningful purpose. In a world that often drains sensitive souls, we've created a space for genuine empowerment.</p>
        </div>
    </section>

    <!-- Categories Section -->
    <section id="superpowers" class="section categories">
        <div class="section-header">
            <div class="section-label">Your Empathic Superpowers</div>
            <h2 class="section-title">What makes empaths extraordinary</h2>
        </div>
        <div class="categories-grid">
            <div class="category-card">
                <div class="category-icon">üåü</div>
                <h3 class="category-title">Deep Emotional Intelligence</h3>
                <p class="category-description">Your ability to sense and understand emotions is your greatest strength. Learn to harness it for personal and professional success.</p>
            </div>
            <div class="category-card">
                <div class="category-icon">üõ°Ô∏è</div>
                <h3 class="category-title">Energy Protection</h3>
                <p class="category-description">Master boundaries and self-care practices that protect your energy while maintaining authentic connections with others.</p>
            </div>
            <div class="category-card">
                <div class="category-icon">üöÄ</div>
                <h3 class="category-title">Conscious Growth</h3>
                <p class="category-description">Transform sensitivity into strength through mindful practices, healing modalities, and community support.</p>
            </div>
        </div>
    </section>

    <!-- Success Stories Section -->
    <section id="stories" class="section success-stories">
        <div class="section-header">
            <div class="section-label">Success Stories</div>
            <h2 class="section-title">Thriving empaths in our community</h2>
            <p class="section-description">Real stories from empaths who discovered their path to authentic success.</p>
        </div>
        <div class="stories-container">
            <div class="stories-slider">
                <div class="story-card">
                    <div class="story-avatar">SM</div>
                    <p class="story-quote">"I finally understand that being an empath is my superpower, not my weakness. This community showed me how to thrive."</p>
                    <div class="story-name">Sarah M.</div>
                </div>
                <div class="story-card">
                    <div class="story-avatar">JR</div>
                    <p class="story-quote">"Learning to protect my energy changed everything. I can now help others without depleting myself completely."</p>
                    <div class="story-name">James R.</div>
                </div>
                <div class="story-card">
                    <div class="story-avatar">LT</div>
                    <p class="story-quote">"This platform helped me build a career that honors my empathic gifts. I'm no longer hiding who I truly am."</p>
                    <div class="story-name">Lisa T.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section id="team" class="section team">
        <div class="section-header">
            <div class="section-label">Our Team</div>
            <h2 class="section-title">Empaths supporting empaths</h2>
            <p class="section-description">Passionate souls dedicated to helping you unlock your empathic potential every day.</p>
        </div>
        <div class="team-grid">
            <div class="team-member">
                <div class="team-avatar">ES</div>
                <h3 class="team-name">Emma Sterling</h3>
                <p class="team-role">Founder & Empath Coach</p>
            </div>
            <div class="team-member">
                <div class="team-avatar">DW</div>
                <h3 class="team-name">David Wells</h3>
                <p class="team-role">Energy Healing Specialist</p>
            </div>
            <div class="team-member">
                <div class="team-avatar">MC</div>
                <h3 class="team-name">Maya Chen</h3>
                <p class="team-role">Community Support</p>
            </div>
        </div>
    </section>

    <!-- News Section -->
    <section id="news" class="section news">
        <div class="section-header">
            <div class="section-label">Latest News</div>
            <h2 class="section-title">What's new in our community</h2>
        </div>
        <div class="news-list">
            <div class="news-item">
                <div class="news-date">November 1, 2025</div>
                <h3 class="news-title">New Feature: Virtual Empath Circles</h3>
            </div>
            <div class="news-item">
                <div class="news-date">October 20, 2025</div>
                <h3 class="news-title">Webinar: Thriving as an Empath in the Workplace</h3>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">Empathic Success</div>
            <div class="footer-links">
                <a href="#" class="footer-link">Terms of Service</a>
                <a href="#" class="footer-link">Privacy Policy</a>
                <a href="#" class="footer-link">Contact</a>
                <a href="#" class="footer-link">About Us</a>
            </div>
            <div class="footer-copyright">¬© 2025 Empathic Success ‚Äì All rights reserved.</div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="app.js"></script>

    <!-- Sticky Heart (ultra slow initial rotation) -->
    <div id="heart-sticky">
        <div id="heart-fallback">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="heartGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ff6b9d;stop-opacity:0.9" />
                        <stop offset="50%" style="stop-color:#bc6ff1;stop-opacity:0.95" />
                        <stop offset="100%" style="stop-color:#6485ee;stop-opacity:0.9" />
                    </linearGradient>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                <path d="M50,90 C20,70 10,50 10,35 C10,20 20,10 30,10 C40,10 45,15 50,25 C55,15 60,10 70,10 C80,10 90,20 90,35 C90,50 80,70 50,90 Z" 
                      fill="url(#heartGradient)" 
                      stroke="rgba(255,107,157,0.4)" 
                      stroke-width="0.5"
                      filter="url(#glow)"/>
            </svg>
        </div>
    </div>

    <!-- Three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/DRACOLoader.js"></script>
    <script>
        // ===== ULTRA SLOW INITIAL SPEED + GOOD FRICTION =====
        let scene, camera, renderer, heartModel;
        let currentRotation = 0;
        let velocity = 0;
        let scrollVelocity = 0;
        let lastScrollY = 0;
        let scrollPercent = 0;
        let use3D = false;
        const glbUrl = './heart_compressed.glb';

        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        console.log('üîç Device:', isIOS ? 'iOS' : (isMobile ? 'Mobile' : 'Desktop'));

        function checkWebGL() {
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                return gl ? true : false;
            } catch (e) {
                return false;
            }
        }

        // 2D Fallback
        function use2DFallback() {
            console.log('üé® 2D fallback');
            const fallback = document.getElementById('heart-fallback');
            if (!fallback) return;

            fallback.style.display = 'block';

            let rotation2D = 0;
            let velocity2D = 0;
            let lastScroll2D = 0;
            let scrollPct2D = 0;

            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                const delta = currentScroll - lastScroll2D;

                // ULTRA WOLNA poczƒÖtkowa prƒôdko≈õƒá
                velocity2D += delta * 0.003; // By≈Ço 0.008
                lastScroll2D = currentScroll;

                const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
                scrollPct2D = Math.min(currentScroll / maxScroll, 1);
            }, { passive: true });

            function animate2D() {
                // Dobry friction z index20
                velocity2D *= 0.97;
                rotation2D += velocity2D;

                const scaleValue = 1.0 - (scrollPct2D * 0.7);
                const pulse = 1 + Math.sin(Date.now() * 0.0012) * 0.03;
                const finalScale = scaleValue * pulse;

                fallback.style.transform = `rotate(${rotation2D}deg) scale(${finalScale})`;
                requestAnimationFrame(animate2D);
            }
            animate2D();
        }

        // 3D Init
        async function init3D() {
            if (!checkWebGL()) {
                use2DFallback();
                return;
            }

            try {
                const container = document.getElementById('heart-sticky');
                const canvas = document.createElement('canvas');
                canvas.id = 'heart-3d-canvas';
                container.insertBefore(canvas, container.firstChild);

                const width = window.innerWidth;
                const height = window.innerHeight;

                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                camera.position.z = 4.2;

                renderer = new THREE.WebGLRenderer({
                    canvas: canvas,
                    antialias: !isMobile,
                    alpha: true,
                    powerPreference: isMobile ? 'low-power' : 'high-performance',
                    failIfMajorPerformanceCaveat: false,
                    precision: 'mediump'
                });

                renderer.setClearColor(0x000000, 0);
                renderer.setSize(width, height);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, isMobile ? 1.5 : 2));

                scene.add(new THREE.AmbientLight(0xffffff, 1.4));
                const light = new THREE.PointLight(0xbc6ff1, 2, 130);
                light.position.set(12, 20, 12);
                scene.add(light);

                const response = await fetch(glbUrl);
                if (!response.ok) throw new Error('Fetch failed');

                const arrayBuffer = await response.arrayBuffer();

                const dracoLoader = new THREE.DRACOLoader();
                dracoLoader.setDecoderPath('https://www.gstatic.com/draco/versioned/decoders/1.5.6/');
                dracoLoader.preload();

                const loader = new THREE.GLTFLoader();
                loader.setDRACOLoader(dracoLoader);

                await new Promise((resolve, reject) => {
                    const timeout = setTimeout(() => reject(new Error('Timeout')), 15000);

                    loader.parse(arrayBuffer, '', (gltf) => {
                        clearTimeout(timeout);
                        heartModel = gltf.scene;

                        const box = new THREE.Box3().setFromObject(heartModel);
                        const center = box.getCenter(new THREE.Vector3());
                        const size = box.getSize(new THREE.Vector3());

                        heartModel.position.sub(center);
                        const baseScale = 4.5 / Math.max(size.x, size.y, size.z);
                        heartModel.scale.multiplyScalar(baseScale);

                        if (isMobile) {
                            heartModel.traverse((child) => {
                                if (child.isMesh && child.material) {
                                    child.material.flatShading = true;
                                }
                            });
                        }

                        scene.add(heartModel);
                        use3D = true;
                        resolve();
                    }, reject);
                });

                window.addEventListener('resize', () => {
                    const w = window.innerWidth;
                    const h = window.innerHeight;
                    camera.aspect = w / h;
                    camera.updateProjectionMatrix();
                    renderer.setSize(w, h);
                });

                window.addEventListener('scroll', () => {
                    const currentScrollY = window.pageYOffset;
                    const delta = currentScrollY - lastScrollY;

                    // ULTRA WOLNA poczƒÖtkowa prƒôdko≈õƒá! (10x wolniej ni≈º index20)
                    scrollVelocity += delta * 0.000005; // By≈Ço 0.00005
                    lastScrollY = currentScrollY;

                    const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
                    scrollPercent = Math.min(currentScrollY / maxScroll, 1);
                }, { passive: true });

                animate3D();

            } catch (error) {
                console.error('‚ùå 3D failed:', error.message);
                if (renderer) {
                    renderer.dispose();
                    const canvas = document.getElementById('heart-3d-canvas');
                    if (canvas) canvas.remove();
                }
                use2DFallback();
            }
        }

        function animate3D() {
            requestAnimationFrame(animate3D);
            if (!heartModel || !renderer || !use3D) return;

            try {
                // Dobry friction z index20 (zachowany)
                scrollVelocity *= 0.97; // 3% friction - OK!
                velocity += scrollVelocity;
                velocity *= 0.98; // 2% damping - OK!

                currentRotation += velocity;
                heartModel.rotation.y = currentRotation;

                const scrollScale = 1.0 - (scrollPercent * 0.7);
                const pulse = 1 + Math.sin(Date.now() * 0.0013) * 0.03;
                const finalScale = 4.5 * scrollScale * pulse;
                heartModel.scale.set(finalScale, finalScale, finalScale);

                renderer.render(scene, camera);
            } catch (e) {
                console.error('‚ùå Render error:', e);
                use3D = false;
                use2DFallback();
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init3D);
        } else {
            init3D();
        }
    </script>

    <script src="app.js"></script>
</body>
</html>