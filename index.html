<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>prawdziwamilosc.pl - Poznaj miłość, która naprawdę jest prawdziwa</title>
    <meta name="description" content="Portal randkowy oparty na autentyczności, zaufaniu i prawdziwej miłości. Dołącz do społeczności, która wierzy w szczere relacje." />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

    <!-- Three.js Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

    <style>
      /* Przygotuj tu oryginalne style z index.html */
      /* Zawartość CSS pozostaje niezmieniona więc dla przejrzystości tu pomijam */
      /* Skoncentrujemy się na funkcjonalności 3d serca */
    </style>
</head>
<body>
    <!-- Kontener dla serca 3D -->
    <div id="heart-canvas-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; pointer-events: none; z-index: 500;"></div>

    <!-- Content strony pozostaje bez zmian -->

    <!-- Tutaj cała reszta Contentu body z index.html bez zmian -->



    <!-- Skrypty GSAP i inne -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="app.js"></script>

    <!-- Skrypt Three.js ładowania i animacji serca -->
    <script>
      (function () {
        if (typeof THREE === "undefined") {
          console.error("Three.js nie został załadowany!");
          return;
        }

        const container = document.getElementById("heart-canvas-container");
        if (!container) {
          console.error("Kontener heart-canvas-container nie został znaleziony!");
          return;
        }

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(
          45,
          window.innerWidth / window.innerHeight,
          0.1,
          1000
        );

        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set(5, 5, 5);
        scene.add(directionalLight);

        const pointLight = new THREE.PointLight(0xff0055, 1, 100);
        pointLight.position.set(0, 0, 3);
        scene.add(pointLight);

        let heartModel = null;
        let mixer = null;
        let scrollProgress = 0;

        const initialScale = 0.8;
        const maxScale = 1.5;

        const loader = new THREE.GLTFLoader();

        // Użycie pełnej ścieżki URL do pliku .glb
        const modelUrl = "https://asekalski.github.io/prawdziwamilosc.pl-/heart_compressed.glb";

        loader.load(
          modelUrl,
          function (gltf) {
            heartModel = gltf.scene;
            heartModel.scale.set(initialScale, initialScale, initialScale);

            const box = new THREE.Box3().setFromObject(heartModel);
            const center = box.getCenter(new THREE.Vector3());
            heartModel.position.sub(center);
            scene.add(heartModel);

            if (gltf.animations && gltf.animations.length > 0) {
              mixer = new THREE.AnimationMixer(heartModel);
              gltf.animations.forEach((clip) => {
                mixer.clipAction(clip).play();
              });
            }
            console.log("Model serca załadowany pomyślnie!");
          },
          function (xhr) {
            const percent = (xhr.loaded / xhr.total) * 100;
            console.log(`Ładowanie serca: ${percent.toFixed(2)}%`);
          },
          function (error) {
            console.error("Błąd ładowania modelu serca:", error);
          }
        );

        let targetScrollProgress = 0;

        window.addEventListener("scroll", () => {
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
          targetScrollProgress = Math.min(scrollTop / scrollHeight, 1);
        });

        const clock = new THREE.Clock();

        function animate() {
          requestAnimationFrame(animate);

          if (heartModel) {
            scrollProgress += (targetScrollProgress - scrollProgress) * 0.1;
            heartModel.rotation.y = scrollProgress * Math.PI * 4;
            heartModel.rotation.x = Math.sin(scrollProgress * Math.PI * 2) * 0.3;
            const scaleValue = initialScale + (maxScale - initialScale) * scrollProgress;
            heartModel.scale.set(scaleValue, scaleValue, scaleValue);
            const pulseScale = 1 + Math.sin(Date.now() * 0.001) * 0.03;
            heartModel.scale.multiplyScalar(pulseScale);
          }

          if (mixer) {
            mixer.update(clock.getDelta());
          }

          renderer.render(scene, camera);
        }

        function onWindowResize() {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        }

        window.addEventListener("resize", onWindowResize, false);

        animate();
      })();
    </script>
</body>
</html>